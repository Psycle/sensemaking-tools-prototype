# Glue Migration Guide

internal link

<!--* freshness: { exempt: true } *-->




This migration guide details how to update your project's code when upgrading
Glue between major versions. It is not needed if you are upgrading Glue between
minor versions, or are starting a new project from the latest version.

## Version 28.x to 29.x

### Social icons (Twitter)

The Twitter SVG icon has been deprecated. Social links should refer to the X
icon instead.

```html {.bad}
  <svg role="presentation" aria-hidden="true"
      class="glue-icon glue-icon--social glue-icon--color-twitter glue-icon--24px">
    <use href="/public/icons/glue-icons.svg#twitter"></use>
  </svg>
```

```html {.good}
  <svg role="presentation" aria-hidden="true"
      class="glue-icon glue-icon--social glue-icon--color-x glue-icon--24px">
    <use href="/public/icons/glue-icons.svg#x"></use>
  </svg>
```

### Changes in Cards video templates

 - class `glue-video`has been moved from `<li>` element to `<a>` element.
 - Class `glue-video__preview-container` and
   `glue-video__preview-container--cards` are moved from `<a>` element to a
   child `<div>` element of `glue-card__inner`.
 - Class `glue-video__preview-container--cards` is replaced by `glue-video__preview-container--modal`
 - Picture element `glue-video__preview` has been moved out of
   `glue-video__info` element.

```html {.bad}
  <li class="glue-video">
    <a class="glue-card glue-video__preview-container glue-video__preview-container--cards">
      <div class="glue-card__inner">
        <div class="glue-video__info">
          <picture class="glue-video__preview"><img>....</picture>
        </div>
      </div>
    </a>
    <div class="glue-modal glue-modal--dark" role="dialog" aria-modal="true">
      ...
        <button class="glue-modal__close-btn" tabindex="0" aria-label="Close this modal"></button>
    </div>
  </li>
```

```html {.good}
  <li>
    <a class="glue-card glue-video">
      <div class="glue-card__inner">
        <div class="glue-video__preview-container glue-video__preview-container--modal">
          <picture class="glue-video__preview"><img>....</picture>
          <div class="glue-video__info">...</div>
        </div>
      </div>
    </a>
    <div class="glue-modal glue-modal--dark" role="dialog" aria-modal="true">
      ...
        <button class="glue-modal__close-btn" aria-label="Close this modal"></button>
    </div>
  </li>
```

## Version 27.x to 28.x

### Changes to Glue Filter (chips)
Both HTML and functional changes have been made to the chips feature of Filter.

#### Chips as indicators/secondary filter toggle

Chips are no longer added to the container on filter initialization. Instead,
they are dynamically added/removed from the container when their associated
filter is toggled. If you are adding classes or properties to chips when you
initialize the component, you will need to change that to add them when the
chips are added (by listening to each filter's change events through the
stateManager.)

#### MWS Horizontal/Chips layout (chips as primary filter toggle)

Chips are still added on filter initialization when they are the primary filter
toggle.

The chips container HTML has been updated to improve accessibility. The title
has been moved outside of the chips container. The Clear Filters button, which
was previously generated by Filter, needs to be added manually after the chips
container.

```html {.bad}
<div class="glue-filter__chips glue-filter__chips--primary" role="grid"
    aria-label="Applied filters"
    data-glue-filter-chips-label-reset="Clear filters"
    data-glue-filter-chips-label-add="Add filter"
    data-glue-filter-chips-label-remove="Remove filter">
  <h2 class="glue-headline glue-headline--headline-6">
    Filter by CategoryName:
  </h2>
  <!-- Chip content is populated by Glue Filter on initialization -->
</div>
```

```html {.good}
<div class="glue-filter__chips-bar">
  <h2 class="glue-filter__chips-header glue-headline glue-headline--headline-6">
    Filter by CategoryName:
  </h2>
  <div class="glue-filter__chips glue-filter__chips--primary" role="grid"
      aria-label="Applied filters"
      data-glue-filter-chips-label-add="Add filter"
      data-glue-filter-chips-label-remove="Remove filter">
    <!-- Chip content is populated by Glue Filter on initialization -->
  </div>
  <button class="glue-button glue-button--low-emphasis glue-filter__reset-all glue-filter__chip">
    Clear filters
  </button>
</div>
```

## Version 26.x to 27.x

### Removal of Glue Popover component
Glue Popover component has removed public access and becomes a dependency of
Glue Social component. Existing Glue Social users do not need to import
Glue Popover separately.

### MWS styles and restructuring of Glue Filter component

The Glue Filter component has been restructured, with class and property
renaming to support MWS layouts and features.


**Class renaming**

Old class name               | New class name
-----------------------------| ----------------------------
glue-filter-control          | glue-filter__category
glue-filter__item            | glue-filter__category-item
glue-filter-label-group      | glue-filter__chips
glue-filter-label            | glue-filter__chip
glue-filter-result           | glue-filter__results
glue-filter-num-results      | glue-filter__results-count
glue-filter-result__item     | glue-filter__result
glue-filter-label--show      | glue-filter__chip--is-active
glue-filter__chip__close-btn | glue-filter__chip-close-btn

**Property renaming**

Old property name       | New property name
----------------------- | --------------------------------
data-glue-filter-ids    | data-glue-filter-categories
data-glue-filter-id     | data-glue-filter-category
data-glue-filter-option | data-glue-filter-category-item

## Version 25.x to 26.x

### Removal of hover support in Popover

Popover does not support hover-to-open feature anymore to favor the new Tooltip
component. Html attribute `data-glue-popover-trigger` should be removed from the
template.

```html {.bad}
<div class="glue-popover" data-glue-popover-trigger="click">
  ...
</div>
```

```html {.good}
<div class="glue-popover">
  ...
</div>
```

The `trigger` property should be removed from the Popover config object.

```ts {.bad}
// Before:
new Popover(element, {
    trigger: 'click',
    takeFocus: 'true',
    placement: 'left'
}
```

```ts {.good}
// After:
new Popover(element, {
    takeFocus: 'true',
    placement: 'left'
}
```

### Removal of HammerJS dependency from Header

HammerJS is no longer required to use the Glue Header component.

### Rename Glue ExpansionPanels component

Glue `ExpansionPanelsPanelGroup` is renamed to `ExpansionPanels`

```ts {.bad}
// Before:
import {ExpansionPanelsPanelGroup} from '@google/glue/';
new ExpansionPanelsPanelGroup(element);
```

```ts {.good}
// After:
import {ExpansionPanels} from '@google/glue/';
new ExpansionPanels(element);
```

### Removal of Glue Easing

We removed Glue Easing from the library. Users can look for other 3rd party
alternatives if they want the similar feature.

### Footer and Footer Sitelinks components merge

The footer sitelinks component has been merged into the primary footer
component. References to sitelinks will need to be updated. Footers which only
use the global and/or social features are not affected.

#### SCSS

```scss {.bad}
// Import Footer and Footer Sitelinks individually
@use '@google/glue/lib/footer';
@use '@google/glue/lib/footer/footersitelinks';
```

```scss {.good}
// Import Footer for all styles
@use '@google/glue/lib/footer';
```

#### TS

```ts {.bad}
// Import Footer Sitelinks from the subcomponent and initialize on sitelinks
import {FooterSitelinks, FooterSiteLinksOptions} from '@google/glue';

const footerSitelinkOpts: Partial<FooterSiteLinksOptions> = {
  columnCount: 4
};

const footerSitelinksEl = document.querySelector<HTMLElement>('.glue-footer__site-links-grid');
if (footerSitelinksEl) new FooterSitelinks(footerSitelinksEl, footerSitelinkOpts);
```

```ts {.good}
// Import Footer from the root component and initialize on root
import {Footer, FooterOptions} from '@google/glue';

const footerOpts: Partial<FooterOptions> = {
  columnCount: 4
};

const footerEl = document.querySelector<HTMLElement>('.glue-footer');
if (footerEl) new Footer(footerEl, footerOpts);
```

### Restructuring and initializing Glue Social

As part of adding a new persistent variation to the social component, some parts
of the Social component DOM have been restructured and simplified. Social now
has its own TS initialization that covers all of its subcomponents instead of
initializing these separately.

#### Social Icon colors

Icon colors are now controlled via a class on the root. All icons should include
a color class name, which the root class will use to set appropriate colors. If
a color class names are not used, the component will render in monochrome style.

```html {.bad}
<!-- Root structure -->
<section class="glue-social">
  <!-- Social content -->
</section>

<!-- Icon structure -->
<svg role="presentation" aria-hidden="true"
    class="glue-icon glue-icon--social glue-icon--24px">
  <use href="/path/to/glue-icons.svg#twitter"></use>
</svg>
```

```html {.good}
<!-- Root structure -->
<section class="glue-social glue-social--partialmonochrome">
  <!-- Social content (partial monochrome variation) -->
</section>

<!-- Icon structure -->
<svg role="presentation" aria-hidden="true"
    class="glue-icon glue-icon--social glue-icon--24px glue-icon--color-twitter">
  <use href="/path/to/glue-icons.svg#twitter"></use>
</svg>
```

#### Social Copy/Popover

Copy/popover DOM has changed, as the Social component now adds a lot of the
structure needed to initialize these subcomponents. The popover dialogue also
contains a copy of the link icon for more consistent styling.

```html {.bad}
<li class="glue-social__item glue-social__zippy-popover" title="Get shareable link">
  <div class="glue-social glue-social--popover">
    <div class="glue-popover" data-glue-popover-trigger="click">
      <div class="glue-popover__trigger glue-social__icon-trigger" id="popover-trigger-static" role="button" aria-label="Get shareable link" tabindex="0" title="Get shareable link">
        <svg role="presentation" class="glue-icon glue-icon--social glue-icon--24px" aria-hidden="true">
          <use href="/path/to/glue-icons.svg#link"></use>
        </svg>
      </div>

      <div class="glue-popover__dialog glue-social__dialog" id="popover-dialog-static">
        <div class="glue-copy" glue-copy-success="Copied to clipboard" glue-copy-fail="Press Ctrl+C or ⌘+C to copy">
          <input class="glue-social__copy-input glue-copy-value" readonly="" type="text" value="www.google.com">
          <button class="glue-social__copy-btn glue-copy-button" id="copy-trigger" aria-live="polite">Copy link</button>
        </div>
        <div aria-label="Close" class="glue-popover__close-btn glue-social__close-btn" role="button" tabindex="0">
          ×
        </div>
      </div>
    </div>
  </div>
</li>
```

```html {.good}
<li class="glue-social__item">
  <div class="glue-social__popover">
    <div class="glue-social__icon-trigger" aria-label="Get shareable link"
        title="Get shareable link" id="share-popover-trigger">
      <svg role="presentation" aria-hidden="true"
          class="glue-icon glue-icon--social glue-icon--color-sharelink glue-icon--24px">
        <use href="/public/icons/glue-icons.svg#link"></use>
      </svg>
    </div>

    <div class="glue-social__dialog" id="share-popover-dialog">
      <svg role="presentation" aria-hidden="true"
          class="glue-icon glue-icon--social glue-icon--color-sharelink glue-icon--24px">
        <use href="/public/icons/glue-icons.svg#link"></use>
      </svg>
      <div class="glue-social__copy" glue-copy-success="Copied to clipboard"
          glue-copy-fail="Press Ctrl+C or ⌘+C to copy">
        <input class="glue-social__copy-input" readonly="" type="text"
            value="www.google.com">
        <button class="glue-social__copy-btn" id="share-copy-btn">
          Copy link
        </button>
      </div>
      <div aria-label="Close" class="glue-social__close-btn">
        ×
      </div>
    </div>
  </div>
</li>
```

```ts {.bad}
// Initialize copy and popover directly
import {Copy} from '@google/glue';
import {Popover} from '@google/glue';

const socialCopyEl = document.querySelector<HTMLElement>('.glue-social .glue-copy');
const socialPopoverEl = document.querySelector<HTMLElement>('.glue-social .glue-popover');
if (socialCopyEl) new Copy(socialCopyEl);
if (socialPopoverEl) new Popover(socialPopoverEl);
```

```ts {.good}
// Initialize Social only
import {Social} from '@google/glue';

const socialEl = document.querySelector<HTMLElement>('.glue-social');
if (socialEl) new Social(socialEl);
```

#### Social Expansion Panels

Expansion Panels DOM is simplified, as the Social component now adds a lot of
the structure needed to initialize this subcomponent.

```html {.bad}
<section class="glue-social glue-social--zippy glue-expansion-panels glue-spacer-2-top"
         data-glue-expansion-panel-expand-tooltip="Share: Expand to see social channels"
         data-glue-expansion-panel-collapse-tooltip="Share: Hide social channels">
  <div id="share-expandable" class="glue-social__group glue-expansion-panel">
    <h2 class="glue-expansion-panel__toggle">
      <button class="glue-expansion-panel__button glue-social__title
                     glue-social__title--zippy glue-social__title--inline"
              data-glue-expansion-panel-toggle-for="share-expandable-panel"
              id="share-expandable-toggle">
        <svg role="presentation" aria-hidden="true"
             class="glue-icon glue-icon--social glue-social__share-icon
                    glue-icon--24px">
          <use href="/public/icons/glue-icons.svg#share"></use>
        </svg>
        Share
      </button>
    </h2>
    <div class="glue-expansion-panel__content" id="share-expandable-panel">
      <ul class="glue-social__list glue-no-bullet" role="list">
        <li class="glue-social__item">
          <a class="glue-social__link"
            href="https://www.facebook.com/sharer/sharer.php?u=https%3A//www.google.com"
            title="Share on Facebook"
            onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
            <svg role="presentation" aria-hidden="true"
                 class="glue-icon glue-icon--social glue-icon--24px">
              <use href="/public/icons/glue-icons.svg#post-facebook"></use>
            </svg>
          </a>
        </li>
        <!-- additional icons as needed -->
      </ul>
    </div>
  </div>
</section>
```

```html {.good}
<section class="glue-social glue-social--zippy glue-social--partialmonochrome" id="share-default"
         data-glue-expansion-panel-expand-tooltip="Share: Expand to see social channels"
         data-glue-expansion-panel-collapse-tooltip="Share: Hide social channels">
  <div class="glue-social__group">
    <h2 class="glue-social__title glue-social__title--zippy glue-social__title--inline">
      <svg role="presentation" aria-hidden="true"
          class="glue-icon glue-icon--social glue-social__share-icon glue-icon--24px">
        <use href="/public/icons/glue-icons.svg#share"></use>
      </svg>
      Share
    </h2>

    <ul class="glue-social__list" role="list">
      <li class="glue-social__item">
        <a class="glue-social__link" href="https://www.facebook.com/sharer/sharer.php?u=https%3A//www.google.com"
            title="Share on Facebook" target="_blank" rel="noopener">
          <svg role="presentation" aria-hidden="true"
              class="glue-icon glue-icon--social glue-icon--color-facebook glue-icon--24px">
            <use href="/public/icons/glue-icons.svg#post-facebook"></use>
          </svg>
        </a>
      </li>
      <!-- additional icons as needed -->
    </ul>
  </div>
</section>
```

```ts {.bad}
// Initialize Expansion Panels directly
import {ExpansionPanels} from '@google/glue';

const socialPanelsEl = document.querySelector<HTMLElement>('.glue-social.glue-expansion-panels');
if (socialPanelsEl) new ExpansionPanels(socialPanelsEl);
```

```ts {.good}
// Initialize Social only
import {Social} from '@google/glue';

const socialEl = document.querySelector<HTMLElement>('.glue-social');
if (socialEl) new Social(socialEl);
```

### Removal of unused icon classes

Several icon classes have been removed as they are no longer in use in the Glue
library (part of components that have changed their structure or components
which have already been removed).

-   `glue-icon--arrow-sort-asc`
-   `glue-icon--arrow-sort-desc`
-   `glue-icon--arrow-top`
-   `glue-icon--chevron`
-   `glue-icon--chevron-down`
-   `glue-icon--keyboard-arrow-left`
-   `glue-icon--keyboard-arrow-right`

## Version 24.x to 25.x

### Node version upgrade

Node version and npm version supported have been updated.

Node: `v10.15.3` -> `v16.13.0`

npm: `v6.4.1` -> `v8.1.3`

### Header template changes

Please refer to the header
[docs](/docs/components/header.md) for details.

#### Skip to Content

```html {.bad}
// Before:
<a href="#content" class="glue-header__link glue-header__skip-content">
  <p class="glue-header__skip-content-text">Jump to Content</p>
</a>
```

```html {.good}
// After:
<a href="#content" class="glue-header__link glue-header__skip-content">
  Jump to Content
</a>
```

#### Logo lockup

```html {.bad}
// Before:
<p class="glue-header__logo--product">Product</p>
```

```html {.good}
// After:
<span class="glue-header__logo--product">Product</span>
```

#### Site Switcher

```html {.bad}
// Before:
<div class="glue-header__bar glue-header__bar--desktop glue-header__drawer glue-header__site-switcher">
```

```html {.good}
// After:
<div class="glue-header__bar glue-header__bar--desktop glue-header__drawer">
```

```html {.bad}
// Before:
<div class="glue-header__logo glue-header__site-switcher-trigger">
```

```html {.good}
// After:
<div id="site-switcher" class="glue-header__logo glue-header__site-switcher" aria-controls="site-switcher-menu">
```

#### Site Switcher Menu

```html {.bad}
// Before:
<div class="glue-header__container glue-header__site-switcher-menu">
  <ul class="glue-header__site-switcher-menu-list">
    <li class="glue-header__site-switcher-menu-item">
      <a href="#" class="glue-header__site-switcher-menu-link">
        Google Product
       <p class="glue-header__site-switcher-item-description">Explore the new Google Product</p>
      </a>
      <p class="glue-header__site-switcher-item-description glue-header__site-switcher-more-products">More from Google Product</p>
    </li>
    <li class="glue-header__site-switcher-menu-item selected">
      <a href="#" class="glue-header__site-switcher-menu-link">
        Subproduct 1
        <p class="glue-header__site-switcher-item-description">Earn rewards by contributing to Maps</p>
      </a>
    </li>
    <li class="glue-header__site-switcher-menu-item">
      <a href="#" class="glue-header__site-switcher-menu-link">
        Subproduct 2
        <p class="glue-header__site-switcher-item-description">See the world from every angle</p>
      </a>
    </li>
  </ul>
  <button type="button" class="glue-popover__close-btn glue-header__site-switcher-close-btn" aria-label="Close">×</button>
</div>
```

```html {.good}
// After:
<ul id="site-switcher-menu" class="glue-header__site-switcher-menu" aria-labelledby="site-switcher">
  <li class="glue-header__site-switcher-menu-item">
    <a href="#" class="glue-header__site-switcher-menu-link">
      Google Product
      <p class="glue-header__site-switcher-item-description">Explore the new Google Product</p>
    </a>
    <p class="glue-header__site-switcher-item-description glue-header__site-switcher-more-products">More from Google Product</p>
  </li>
  <li class="glue-header__site-switcher-menu-item selected">
    <a href="#" class="glue-header__site-switcher-menu-link">
      Subproduct 1
      <p class="glue-header__site-switcher-item-description">Earn rewards by contributing to Maps</p>
    </a>
  </li>
  <li class="glue-header__site-switcher-menu-item">
    <a href="#" class="glue-header__site-switcher-menu-link">
      Subproduct 2
      <p class="glue-header__site-switcher-item-description">See the world from every angle</p>
    </a>
  </li>
</ul>
```

#### Deep Navigation

Move class `glue-header__deep-nav` from `li` to its parent `ul` element. And you
only need one `glue-header__deep-nav` class in the top level `ul` element.
Remove all other `glue-header__deep-nav` classes in the children elements.

```html {.bad}
// Before:
<ul class="glue-header__list glue-header__list--nested">
 <li class="glue-header__item glue-header__deep-nav glue-header--is-active">
```

```html {.good}
// After:
<ul class="glue-header__list glue-header__list--nested glue-header__deep-nav">
  <li class="glue-header__item glue-header--is-active">
```

Remove `glue-header__deep-nav-trigger` class.

```html {.bad}
// Before:
<a class="glue-header__link glue-header__deep-nav-trigger" href="#">
```

```html {.good}
// After:
<a class="glue-header__link" href="#">
```

Remove `glue-header__deep-nav-dialog` class.

```html {.bad}
// Before:
<ul class="glue-header__list glue-header__deep-nav-dialog">
```

```html {.good}
// After:
<ul class="glue-header__list">
```

### YouTube Video Player

Preview elements have been added for YouTube Videos.

#### Template changes

HTML elements with the `glue-video` and `glue-video__container` class are
mandatory. The video preview container and all elements inside it are optional.

```html {.bad}
// Before:
<div class="glue-video">
  <div class="glue-video__container demo-yt-video-simple"
        data-glue-yt-video-vid="pXc_w49fsmI"
        data-glue-yt-video-height="390"
        data-glue-yt-video-width="640">
  </div>
</div>
```

```html {.good}
// After:
<div class="glue-video">
  <!-- video preview container -->
  <div class="glue-video__preview-container glue-video__preview-container--inline">
    <!-- elements for label, timestamp and preview image -->
  </div>

  <!-- video container with class for inline video -->
  <div class="glue-video__container glue-video__container--inline"
      data-glue-yt-video-vid="pXc_w49fsmI">
  </div>
</div>
```

#### JavaScript

To initialize the component, the element with class `glue-video` should be used.

```js {.bad}
// Before:
const element = document.querySelector('.glue-video__container');
new YoutubeVideo(element);
```

```js {.good}
// After:
const element = document.querySelector('.glue-video');
new YoutubeVideo(element);
```

## Version 23.x to 24.x

Glue migrated its source of truth from git-on-borg to google3. Numerous changes
were made to the project structure to facilitate this.

### Removal of HammerJS dependency from Carousel

HammerJS is no longer required to use the Glue Carousel component. It is still
required in Glue Header and Jumplinks components though.

### Sass imports

Sass source now lives alongside the TS source in the lib folder. In cases where
there was no TS, a new folder in lib was made for the component. There is no
longer a distinction between global, component, tool, or modifier Sass;
everything is now considered a component.

All Sass imports need to be updated.

```scss {.bad}
// Before:
@use '@google/glue/scss/global/base';
@use '@google/glue/scss/components/buttons/buttons';
@use '@google/glue/scss/modifiers/spacers';
```

```scss {.good}
// After:
@use '@google/glue/lib/buttons';
@use '@google/glue/lib/core';
@use '@google/glue/lib/spacers';
```

Review individual components for the full list of their updated imports setup.

### Carousel

#### Template changes

The HTML snippets for the previous and next buttons are moved before the slides
element. See [details](/docs/components/carousel.md).

```html {.bad}
// Before:
<div class="glue-carousel">
  <!-- Slides -->
  <!-- Previous button -->
  <!-- Next button -->
  <!-- Navigation dots -->
</div>
```

```html {.good}
// After:
<div class="glue-carousel">
  <!-- Previous button -->
  <!-- Next button -->
  <!-- Slides -->
  <!-- Navigation dots -->
</div>
```

To improve the accessibility for some carousel variations, we’ve updated the
navigation to use a div element containing buttons (rather than a list of list
items).

```html {.bad}
// Before:
<ul class="glue-carousel__navigation" aria-label="Choose slide to display"></ul>
```

```html {.good}
// After:
<div class="glue-carousel__navigation" aria-label="Choose slide to display"></div>
```

#### JavaScript

The `updateCurrent` method has been deprecated and replaced by
`setCurrentSlide`.

```js {.bad}
// Before:
carousel.updateCurrent(1);
```

```js {.good}
// After:
carousel.setCurrentSlide(1);
```

### Colors

Colors are now available as CSS variables as well as Sass variables. See the
[Colors documentation](/docs/components/colors.md) for full
details and setup.

With `@use`, you can now namespace when importing, so variable names have been
updated to remove explicit namespacing.

```scss {.bad}
// Before:
@use '@google/glue/scss/global/settings/colors' as glue-colors;

.grey-box {
  background: glue-colors.$glue-grey-200;
  padding: 20px;
}
```

```scss {.good}
// After:
@use '@google/glue/lib/colors/variables' as glue-colors-variables;

.grey-box {
  background: glue-colors-variables.$grey-200;
  padding: 20px;
}
```

### Cookie Consent Banner

Instead of copying the CCB CSS into your project, you can now use Glue's CDN.
This is independent of Glue's main styles.

```html
<link href="//www.gstatic.com/glue/VERSION/ccb.min.css" rel="stylesheet">
```

### CSS Utilities (modifiers)

CSS utility classes have been broken up into individual components:
[Accessibility](/docs/components/accessibility-classes.md),
[Alignment](/docs/components/alignment.md),
[Elevation](/docs/components/elevation.md),
[Order](/docs/components/order.md), and
[Spacers](/docs/components/spacers.md). Typography utilities
have been merged into the main
[Typography component](/docs/components/typography.md).

#### Removal of "-mod" in class names

Modifier classes no longer use the `-mod` classifier.

-   glue-mod-visually-XXX -> glue-visually-XXX
-   glue-mod-valign-XXX -> glue-valign-XXX
-   glue-mod-elevation-X -> glue-elevation-X
-   glue-mod-text-XXX -> glue-text-XXX
-   glue-mod-order-X -> glue-order-X
-   glue-mod-spacer-XXX -> glue-spacer-XXX

### Elevation

The Sass elevation mixin has been renamed from `glue-mod-elevation` to
`set-level` and has been merged into the main elevation component.

```scss {.bad}
// Before:
@use '@google/glue/global/tools/fluorish' as glue-fluorish;

.foo {
  @include glue-fluorish.glue-mod-elevation(0);
}
```

```scss {.good}
// After:
@use '@google/glue/lib/elevation/mixins' as glue-elevation-mixins;

.foo {
  @include glue-elevation-mixins.set-level(0);
}
```

### Expansion panels

Variable naming has removed explicit Glue namespacing, if you are changing the
animation timing when importing.

```scss {.bad}
// Before:
@use '@google/glue/scss/components/expansion-panels/expansion-panels' with (
  $glue-expansion-panels-animation-timing-content: 500ms;
);
```

```scss {.good}
// After:
@use '@google/glue/lib/expansionpanels' with (
  $animation-timing-content: 500ms;
);
```

The DOM structure for expansion panels has been adjusted to match WAI-ARIA 1.1
guidelines. Additionally, some class and properties have also been changed.

The tooltips for the toggle (`data-glue-expansion-panel-expand-tooltip` and
`data-glue-expansion-panel-collapse-tooltip`) have been moved to the panels root
element so it only has to be set once.

Panels root (before)

```html {.bad}
<div class="glue-expansion-panels"
     data-glue-expansion-panels-key="mypanels-key">
```

Panels root (after)

```html {.good}
<div class="glue-expansion-panels"
     data-glue-expansion-panels-key="mypanels-key"
     data-glue-expansion-panel-expand-tooltip="Expand this topic"
     data-glue-expansion-panel-collapse-tooltip="Collapse this topic">
  ...
</div>
```

Toggle all (before)

```html {.bad}
<button aria-label="Toggle all Panel Group panels"
        class="glue-expansion-panels-toggle-all
               glue-button glue-button--low-emphasis glue-button--icon-right">
  <span class="glue-expansion-panels__toggle-text
               glue-expansion-panels__toggle-text--expanded"
        aria-hidden="true">
    Expand all
  </span>
  <span class="glue-expansion-panels__toggle-text
               glue-expansion-panels__toggle-text--collapsed"
        aria-hidden="true">
    Collapse all
  </span>
  <svg role="presentation" aria-hidden="true" class="glue-icon">
    <use href="/path/to/glue-icons.svg#expand-all"></use>
  </svg>
</button>
```

Toggle all (after)

```html {.good}
<button aria-label="Toggle all Sole FAQ panels" id="panels-toggle-all"
        class="glue-expansion-panels__toggle-all
               glue-button glue-button--low-emphasis glue-button--icon-right">
  <span class="glue-expansion-panels__toggle-text
               glue-expansion-panels__toggle-text--expanded">
    Expand all
  </span>
  <span class="glue-expansion-panels__toggle-text
               glue-expansion-panels__toggle-text--collapsed">
    Collapse all
  </span>
  <svg role="presentation" aria-hidden="true" class="glue-icon">
    <use href="/public/icons/glue-icons.svg#expand-all"></use>
  </svg>
</button>
```

Individual panel (before)

```html {.bad}
<div class="glue-expansion-panel">
  <div class="glue-expansion-panel-toggle"
       data-glue-expansion-panel-toggle-for="panel-1"
       data-glue-expansion-panel-expand-tooltip="Press to expand"
       data-glue-expansion-panel-collapse-tooltip="Press to collapse">
    <h3 class="glue-expansion-panel__button-header">
      Panel 1 heading
    </h3>
    <svg role="presentation" aria-hidden="true"
         class="glue-icon glue-expansion-panel__button-arrow">
      <use href="/path/to/glue-icons.svg#expand-more"></use>
    </svg>
  </div>
  <div class="glue-expansion-panel-content" id="panel-1">
    <div>
      <p>Panel 1 content</p>
    </div>
  </div>
</div>
```

Individual panel (after)

```html {.good}
<div class="glue-expansion-panel">
  <h3 class="glue-expansion-panel__toggle">
    <span id="panel-1-toggle" class="glue-expansion-panel__button"
         data-glue-expansion-panel-toggle-for="panel-1-content">
      <span class="glue-expansion-panel__header-text">
        Panel 1 heading
      </span>
      <svg role="presentation" aria-hidden="true"
           class="glue-icon glue-expansion-panel__header-arrow">
        <use href="/public/icons/glue-icons.svg#expand-more"></use>
      </svg>
    </span>
  </h3>
  <div class="glue-expansion-panel__content" id="panel-1-content">
    <div>
      <p>Panel 1 content</p>
    </div>
  </div>
</div>
```

It is recommended to include a `role` on the content element, typically
`region`, unless you have 6+ panel elements (as too many `region`s will lead to
landmark proliferation.)

### Footer Sitelinks

Footer Sitelinks Sass styles are now separate from the primary footer styles.
Import them only if you are using the sitelinks section, along with the
expansion panels dependency.

```scss {.bad}
// Before:
@use '@google/glue/scss/components/expansion-panels/expansion-panels';
@use '@google/glue/scss/components/footer/footer';
```

```scss {.good}
// After:
@use '@google/glue/lib/expansionpanels';
@use '@google/glue/lib/footer';
@use '@google/glue/lib/footer/footersitelinks';
```

Variable naming has removed explicit Glue namespacing, if you are changing the
animation timing or breakpoint when importing.

```scss {.bad}
// Before:
@use '@google/glue/scss/components/footer/footer' with (
  $glue-footer-sitelinks-animation-timing: 500ms;
  $glue-footer-sitelinks-breakpoint-min-columns: 'lg';
);
```

```scss {.good}
// After:
@use '@google/glue/lib/footer/footersitelinks' with (
  $animation-timing: 500ms;
  $breakpoint-min-columns: 'lg';
);
```

Due to updates in expansion panels, Footer sitelinks also has some changes to
its DOM structure.

Sitelinks column (before):

```html {.bad}
<div class="glue-footer__site-links-column" id="column-1">
  <div class="glue-footer__site-links-header">
    <h4 class="glue-footer__site-links-header-text">
      Link column 1 header
    </h4>
    <svg role="presentation" aria-hidden="true" class="glue-icon
        glue-icon--18px glue-icon--footer
        glue-expansion-panel__button-arrow">
      <use href="/path/to/glue-icons.svg#expand-more"></use>
    </svg>
  </div>
  <ul class="glue-footer__site-links-list glue-no-bullet"
      id="column-1-content" role="list">
    <li class="glue-footer__site-links-list-item">
      <a class="glue-footer__link" href="https://www.google.com/mysite/linkone">
        Link one
      </a>
    </li>
    <!-- addition links in column -->
  </ul>
</div>
```

Sitelinks column (after)

```html {.good}
<div class="glue-footer__site-links-column" id="column-1">
  <h4 class="glue-footer__site-links-header">
    <span class="glue-footer__site-links-header-button" id="column-1-toggle">
      <span class="glue-footer__site-links-header-text">
        Link column 1 header
      </span>
      <svg role="presentation" aria-hidden="true"
           class="glue-icon glue-icon--footer glue-expansion-panel__header-arrow">
        <use href="/public/icons/glue-icons.svg#expand-more"></use>
      </svg>
    </span>
  </h4>
  <div class="glue-footer__site-links-list" id="column-1-content">
    <ul class="glue-no-bullet" role="list">
      <li class="glue-footer__site-links-list-item">
        <a class="glue-footer__link" href="https://www.google.com/mysite/linkone">
          Link one
        </a>
      </li>
      <!-- addition links in column -->
    </ul>
  </div>
</div>
```

### Grids

With `@use`, you can now namespace when importing, so mixin names have been
updated to remove explicit namespacing.

```scss {.bad}
// Before:
@use '@google/glue/scss/global/tools/grids' as glue-grids-mixins;

.foo {
  @include glue-grids-mixins.glue-grid-col-width(6);
}

.bar {
  @include glue-grids-mixins.glue-grid-col-offset(2);
}
```

```scss {.good}
// After:
@use '@google/glue/lib/grids/mixins' as glue-grids-mixins;

.foo {
  @include glue-grids-mixins.col-width(6);
}

.bar {
  @include glue-grids-mixins.col-offset(2);
}
```

### Header

#### Templates changes

The active menu item should use class `glue-header__item--active` instead of
`glue-header--is-active`. Its parent `<li>` elements should still use class
`glue-header--is-active`.

```html {.bad}
// Before:
<li class="glue-header__item glue-header--is-active">
  <a class="glue-header__link" href="#">Main link</a>
  <ul class="glue-header__list glue-header__list--nested">
    <li class="glue-header__item glue-header--is-active">
      <a class="glue-header__link" href="#">Secondary link</a>
    </li>
  </ul>
</li>
```

```html {.good}
// After:
<li class="glue-header__item glue-header--is-active">
  <a class="glue-header__link" href="#">Main link</a>
  <ul class="glue-header__list glue-header__list--nested">
    <li class="glue-header__item glue-header__item--active">
      <a class="glue-header__link" href="#">Secondary link</a>
    </li>
  </ul>
</li>
```

Variable naming has removed explicit Glue namespacing, if you are changing the
breakpoint when importing.

```scss {.bad}
// Before:
@use '@google/glue/lib/header' with (
  $glue-header-breakpoint: 'lg';
);
```

```scss {.good}
// After:
@use '@google/glue/lib/header' with (
  $breakpoint: 'lg';
);
```

### Material Form components

Glue has updated to use v9 of Material, which includes changes to the DOM for
several components. Additionally, Material form components can only be used by
including Glue's separate Material CSS and JS CDN files. See the
[Material setup guide](/docs/getting-started/material.md)
for the full rundown.

### Social Expansion Panels

Due to updates in expansion panels, Social Expansion Panels also has some
changes to its DOM structure.

```html
<section class="glue-social glue-social--zippy glue-expansion-panels glue-spacer-2-top"
         data-glue-expansion-panel-expand-tooltip="Share: Expand to see social channels"
         data-glue-expansion-panel-collapse-tooltip="Share: Hide social channels">
  <div id="share-expandable" class="glue-social__group glue-expansion-panel">
    <h2 class="glue-expansion-panel__toggle">
      <button class="glue-expansion-panel__button glue-social__title
                     glue-social__title--zippy glue-social__title--inline"
              data-glue-expansion-panel-toggle-for="share-expandable-panel"
              id="share-expandable-toggle">
        <svg role="presentation" aria-hidden="true"
             class="glue-icon glue-icon--social glue-social__share-icon
                    glue-icon--24px">
          <use href="/public/icons/glue-icons.svg#share"></use>
        </svg>
        Share
      </button>
    </h2>
    <div class="glue-expansion-panel__content" id="share-expandable-panel">
      <ul class="glue-social__list glue-no-bullet" role="list">
        <li class="glue-social__item">
          <a class="glue-social__link"
            href="https://www.facebook.com/sharer/sharer.php?u=https%3A//landing.google.com/intl/en/pride/"
            title="Share on Facebook"
            onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
            <svg role="presentation" aria-hidden="true"
                 class="glue-icon glue-icon--social glue-icon--24px">
              <use href="/public/icons/glue-icons.svg#post-facebook"></use>
            </svg>
          </a>
        </li>
        <!-- additional icons as needed -->
      </ul>
    </div>
  </div>
</section>
```

### Tabs/Responsive (Tabpanels)

Variable naming has removed explicit Glue namespacing, if you are changing the
animation timing when importing the expansion panel dependency

```scss {.bad}
// Before:
@use '@google/glue/scss/components/expansion-panels/expansion-panels' with (
  $glue-expansion-panels-animation-timing-content: 500ms;
);
```

```scss {.good}
// After:
@use '@google/glue/lib/expansionpanels' with (
  $animation-timing-content: 500ms;
);
```

Due to updates in expansion panels, Responsive Tabs also has some changes to its
DOM structure.

Individual tab content (before)

```html {.bad}
<div id="tab-1">
  <div class="glue-tabpanels__panel-title">
    <h2>
      Tab 1 title
    </h2>
    <svg role="presentation" aria-hidden="true"
         class="glue-icon--18px glue-expansion-panel__button-arrow">
      <use href="/path/to/glue-icons.svg#expand-more"></use>
    </svg>
  </div>
  <div id="tab-1-content" class="glue-tabpanels__panel-content">
    <div>
      <p>Tab 1 content</p>
    </div>
  </div>
</div>
```

Individual tab content (after)

```html {.good}
<div id="tab-1">
  <h2 class="glue-tabpanels__panel-toggle">
    <span class="glue-tabpanels__panel-button" id="tab-1-toggle">
      <span class="glue-tabpanels__panel-title">
        Tab 1 title
      </span>
      <svg role="presentation" aria-hidden="true"
           class="glue-icon glue-expansion-panel__header-arrow">
        <use href="/public/icons/glue-icons.svg#expand-more"></use>
      </svg>
    </span>
  </h2>
  <div id="tab-1-content" class="glue-tabpanels__panel-content">
    <div>
      <p>Tab 1 content</p>
    </div>
  </div>
</div>
```

### Typography

Variable names have been adjusted after removing explicit Glue namespacing.

-   $glue-font-roboto -> $font-face-roboto
-   $glue-font-productsans -> $font-face-productsans
-   $glue-font-googlesans -> $font-face-googlesans
-   $glue-font-googlesansdisplay -> $font-face-googlesansdisplay
-   $glue-font-googlesanstext -> $font-face-googlesanstext
-   $glue-font-latinfallback -> $font-stack-latinfallback
-   $glue-font-ja -> $font-stack-ja
-   $glue-font-ko -> $font-stack-ko
-   $glue-font-zhcn -> $font-stack-zhcn
-   $glue-font-zhtw -> $font-stack-zhtw

## Versions up to 23.1

See the archived migration guide in the
[Cloud source repository](https://source.cloud.google.com/h/webmaster/bs/glue/+/refs/tags/v23.1.0:docs/source/_posts/get-started/migration-guide.md).
